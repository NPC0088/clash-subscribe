port: 7890
socks-port: 7891
allow-lan: false
mode: rule
log-level: info
geodata-mode: true
geo-auto-update: true
geodata-loader: standard
geo-update-interval: 24
geox-url:
  geoip: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat
  geosite: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb
  asn: https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb

rule-providers:
  geolocation-cn:
    type: http
    format: mrs
    behavior: domain
    url: https://gh.sageer.me/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-cn.mrs
    path: ./ruleset/geolocation-cn.mrs
    interval: 86400
  geolocation-!cn:
    type: http
    format: mrs
    behavior: domain
    url: https://gh.sageer.me/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-!cn.mrs
    path: ./ruleset/geolocation-!cn.mrs
    interval: 86400
  private:
    type: http
    format: mrs
    behavior: ipcidr
    url: https://gh.sageer.me/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/private.mrs
    path: ./ruleset/private.mrs
    interval: 86400
  cn:
    type: http
    format: mrs
    behavior: ipcidr
    url: https://gh.sageer.me/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.mrs
    path: ./ruleset/cn.mrs
    interval: 86400

dns:
  enable: true
  ipv6: true
  respect-rules: true
  enhanced-mode: fake-ip
  nameserver:
    - https://120.53.53.53/dns-query
    - https://223.5.5.5/dns-query
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
  proxy-server-nameserver:
    - https://120.53.53.53/dns-query
    - https://223.5.5.5/dns-query
  nameserver-policy:
    geosite:cn,private:
      - https://120.53.53.53/dns-query
      - https://223.5.5.5/dns-query
    geosite:geolocation-!cn:
      - https://dns.cloudflare.com/dns-query
      - https://dns.google/dns-query

proxies:
  - name: 米粒-US
    type: vless
    server: 154.56.121.98
    port: 21145
    uuid: 85bfc9cf-7842-41e2-9f88-3dac8091d1f1
    tls: true
    client-fingerprint: chrome
    servername: yahoo.com
    network: tcp
    reality-opts:
      public-key: PosV0yJDhK8JVsMobbX0mSh5yIsiNy8qtO64MAvdHmw
      short-id: aa657761b0
      spider-x: /
    skip-cert-verify: true
    flow: xtls-rprx-vision

  - name: 米粒-US-HY2
    type: hysteria2
    server: 154.56.121.98
    port: 63802
    password: cac4ac08
    auth: cac4ac08
    sni: www.bing.com
    skip-cert-verify: true

proxy-groups:
  - name: 🚀 节点选择
    type: select
    proxies:
      - DIRECT
      - REJECT
      - ⚡ 自动选择
      - 米粒-US
      - 米粒-US-HY2

  - name: ⚡ 自动选择
    type: url-test
    proxies:
      - 米粒-US
      - 米粒-US-HY2
    url: https://www.gstatic.com/generate_204
    interval: 300
    lazy: false

  - name: 🏠 私有网络
    type: select
    proxies:
      - 🚀 节点选择
      - DIRECT
      - REJECT
      - ⚡ 自动选择

  - name: 🔒 国内服务
    type: select
    proxies:
      - 🚀 节点选择
      - DIRECT
      - REJECT
      - ⚡ 自动选择

  - name: 🌐 非中国
    type: select
    proxies:
      - 🚀 节点选择
      - DIRECT
      - REJECT
      - ⚡ 自动选择

  - name: 🐟 漏网之鱼
    type: select
    proxies:
      - 🚀 节点选择
      - DIRECT
      - REJECT
      - ⚡ 自动选择

rules:
  - RULE-SET,private,🏠 私有网络,no-resolve
  - RULE-SET,geolocation-cn,🔒 国内服务
  - RULE-SET,cn,🔒 国内服务,no-resolve
  - RULE-SET,geolocation-!cn,🌐 非中国
  - MATCH,🐟 漏网之鱼
